


 - looker embed to work with looker user
 - create / work with Ryan to create a Syphonx Looker user
 - SSO document
 




Done:
 - initial analysis of problem statement / init solution iterations, ops discussions
 - creation / analysis of initial Looker dashboards, focused on issue highlighting
 - integration of Looker dashboards into Syphonx, product-page, product-search...

Todo:
 - improved Syphonx integration (ie, same tab click navigation)
 - improved Looker dashboards for Syphonx integration, and independent Looker use
    - aggregation 
 - Syphonx / Looker credentials





seller

 - %price good / bad
 - 


 kpi list w / % not parsing...



Jon: "of all the matches we have, what % actually got updated today, what about < 3 days..."




id | name | total expected crawls | crawls today | % updated | % price null | % reviews null ...
187 | best buy | 124 | 45 | fdsafsd | 24%...


move task list to Page AND 


Retailer summary 
 - retailer
 - 





todo:
 - make rows clickable opening in same tab
 - add /product_page.json and /search_page.json looks
 - script scenario to demonstrate the workflow(s)



 - 
 - add #syphonx to the urls presented in the looker dashboards
 - repeat product-page Looker dashboard for product-search
 - look into Aggregate product-page 
 - all three should function uniformly in looker OR in syphonx
 - analysis on venom / syphonx templates (configs)
    - ie, don't use snooze for 8-16 seconds or Target

 - review Ryan's dashboards
    - what can improve data quality / focus for manual team intervention
    -
    - come up with ideas on how to 
    - trending
    - anomolies
        - can't have a review score without review count

 - Looker credentials, do we have to login...
    - yes, must be logged into Looker for this to work currently...
    - need to add the Insights stuff...
 - sticky headers!!!!!
 - LEFT JOIN to the products that we're supposed to be crawling, clientDB.skus? (filtered to BM)
    - which skus / products have we not crawled within a day or so?
 - 

As an operations person, I'd like tools to help me perform my role more efficiently, and that includes:
 - trending:
    - xxx
 - anomolies:
    - negative / $0 price
    - 
 - seller view
 - additional data:
    - if I fix this... how many problems could potentially be solved?
        - sort problems by this value?
    - 
 - identify current Ops workflow
    - client submits ticket
        - support (PS) turns it into a JIRA
        - Ops person gets JIRA for missing price on sku 123 for Dyson on BestBuy
            - can we then highlight ALL missing price pages for ALL client skus for the client at BestBuy?
            - maybe then ALL missing prices for all sellers for all client skus?
    - Mud Benders provide monitoring dashboards for Ops to look through:
        - seller wide views
        - translations of those data trends / anomolies into task lists?
            - ie, 28% of crawls from BestBuy are failing to parse price, compared to 1 week ago
                - have 1 day interval, 3 day interval, 1 week interval, 2 week interval?
                - TASK: fix BestBuy price, (sort it to the top, show "projected impact" of a fix, ie, will potentially correct 1,624 missing prices)
            - ie, 12% of crawls from Target are coming in with a $0 or negative price...

    - what about those situations where the anomoly / error is valid?
        - how do we prevent that from flooding our reporting?
            - do we highlight only trending violations (dips in values) for non-standard KPIs?
                - videos, enhanced content, multiple images...
            - where Price, stock, image... all are REQUIRED
 - general dashboards for overall health of ALL sellers
    - number of price / stock / image (definite data) missing / errors
    - number of 'optional' items (enhanced content / videos...) missing / errors
        - confirmed valid with 'trending' historically...
    - we should be able to have a good idea of ALL seller health with these...

// product page monitoring 
https://pricespiderstaging.cloud.looker.com/embed/dashboards/1458?Retailer+ID=seller_id

// product search monitoring 
https://pricespiderstaging.cloud.looker.com/embed/dashboards/1459?Retailer+ID=seller_id



https://pricespiderstaging.cloud.looker.com/embed/dashboards/look_id?Retailer+ID=seller_id




prior full page dashboard:
https://lookerstudio.google.com/embed/reporting/93493556-0146-40e0-9df9-38479a47dc53/page/gMrUD




from domain
 - load template
 - resolve seller_id
 - build looker embed url

building looker embed url:
 - https://pricespiderstaging.cloud.looker.com/embed/dashboards/1458?Retailer+ID=


input is:
 - domain
 - seller
 - country_code


data points:
 - country_code
 - seller_name
 - seller_id
 - vpn (vender part number)
 - sku
 - product_name
 - price
 - images
 - videos
 - review_avg
 - review_count
 - enhanced_content
 - product_id
 - capture_date
 - capture_url


https://pricespiderstaging.cloud.looker.com/embed/dashboards/1458?Retailer+ID=





Taylor bug



formula evaluations don't work in chrome extension (mv3 sandbox issue)
new shadow jQuery extension function
switch selectElements function to use jQuery, or use syphonx.extract instead

prevent .sx-select from ever showing up as a selector

freeze add ribbon to top of tree panel
support dot format for selector names
subselect object is omitted when adding an object from the dialog

typing filter for add action dialog
typing filter for open file should go across entire directory tree

revision history
disallow saving template that's changed on storage since it was loaded
indicate unsaved template changes
keep template open between sessions
push current inpected page to panel data

add label to scroll action (top, bottom, element)

default query for object container (body)
allow a selector with no query and no value so long as there is a sub-select with a query or a value (body workaround)

typing filter in open template dialog would be more useful if it could search subdirectories

add dropdown to code in ErrorEditor
add dropdown to level in ErrorEditor

Log output window needs a search textbox with next/previous to be really useful!
Fetch directories individually, not all at once

DONE: Default eye open
DONE: Data contract matching (product-page, search-page, etc.)

Add selectors without typing names
Data explorer
Formulas not working in chrome extension

Need different function signatures for transform actions

Multi backslash in split adds second backlash workaround remove second backslag

backslash in split adds second backlash workaround remove second backslag
make split not advanced

REQUESTS
open template for this page (one click)
auto open extension from url param
data explorer
autosave
add selector dialog uses data contract when available (user doesn't have to type names)


ability to save contracts
autoopen syphonx template url params
open template based on inspected window's url **** 5/10


BUG: a directory that only contains sub-directories (i.e. no files) is not visible in the file open/save dialogs

DONE: hightlighting selectors on page when hovering over tree

query builder: selectMultiple
query builder: text selection (:has doesn't work)

ability to edit schema from the extension
automated testing for chrome extension

URL param to autoopen extension
sendkeys action for example to hit escape key to close a dialog


gadget: if just a tag we should look for more

Move lightbulb out and highlight on hover

FTUI welcome dialog with prompt for email


persist folder you are in

ENGINE CHANGES
add on option to error so we can break on any or none or any
break on=any what does that mean


Test urls
Test runner
Test groups


update is available message
allow _ in file names in cloud storage



show more contextual info in tree after name

add icon button to copy inspected window url to texbox in template settings
view unlinked fields from contract
refresh should have an option to renavigate the page
ability to select steps to run
waitfor mode: exact, range, forever (timeout = -1 or null)
new template should have a default select
opening a template loads contract from closest parent directory
ability to create and edit a data contract
selector name picker when there is a contract
toolbar should not scroll offscreen

default select action with auto-populated selectors from contract
cut/paste nodes in editor tree

select.query is optional when type=object
save manifest version in template

query builder: context sensitive function parameters for replace, etc.
query builder: ability to set outer context for a query
query builder: arrange order of functions
query builder: refactor to enable inter-function view state
query builder: jump to node in elements panel
query builder: if <a> or <img> selected then make adding attr more prominent

refactor queryTracking to not use polling
data explorer (single object view -> table view, copy to clipboard)
copy data to clipboard
view debug log output in data panel
DOM highlighting in data panel

select steps to run in action tree

implement VariantField


User settings: api-key, email
Cloud template storage access control
View template change history (who, when, what/diffs)
Rollbacks


POLISH
file open progress animation on file open/save dialogs
file close prompt for unsaved changes
auto open default url on template open (with user setting)
add info icon to RegExpField explaining start/end with /, flags, capturing group, etc.
add info icon to FormulaField explaining start/end with {}, dynamic strings {``}, known variables (data, etc.), any valid javascript expression
ghosted state in tree for disabled actions or subitems
selector help & tasks


CONSIDER
Consider renaming SelectorField to QueryField, and how to pass other properites to it
Consider refactoring to useQueryBuilder pattern
Consider moving SnoozeMode out of SnoozeInterval in core
Consider adding a context field to Yield in core


FEATURES
comments
DONE: about box with version
DONE: persist user settings
persist open templates
ability to switch between multiple open templates
template params
save data to Google sheets
scheduled runs locally
scheduled runs from cloud
Selector quality feedback (good, fair, poor)
persist templates locally in chrome.storage
paste HTML sandbox
Edit template as code (yaml)
Recorder
Venom conversion tool
IFRAME drilling
Support shadow roots with Playwright
GPT3 chatbot integration
automated test url runner


CURRENT: QUERY BUILDER
regex editor
manual jquery expression editor working
pass whole selector into editor
show name, type, repeated in ribbon
selector list (add, remove, switch)
support middle mouse click to avoid invoking clicks
attempt to optimize away interior paths that are tags
consider partial semantic matching
use syphonx selector engine
support finding :contains style selectors (depends on syphonx)
support repeated selections
manually set outer context



CHORES
investigate if js files in dist folder can be copied from node_modules (jquery.slim.js, syphonx.js)


VALIDATION
multiple DOM hits with repeated=false should be flagged



DONE
log output view
bring back non-AI driven selectors
query builder: context sensitive function parameters for replace, etc.
Change add action to a dialog, adding a select should prompt for the first selector
Fix open template busy status
Typing filter for open file
add field dialog that shows a picker from the contract or sets name, type, repeated and validates not a duplicate
PropertyGridEditor for template and yield params
action scroll to element
cloud log endpoint (not deployed)
expand formulas in url (example: tags.search)
chrome extension setup: react, mui, build, panel
integrate syphonx engine
real time updates
template hierachy view
add action menu
template property sheet
basic expression parser for jquery
basic dom highlighter
basic/advanced filter view
basic data view
template cloud server
integrate template cloud storage (open, save, save as)

Action Views
    action view: waitfor
    action view: break
    action view: click
    action view: each
    action view: error
    action view: repeat
    action view: snooze
    action view: transform
    action view: yield

field editors: formula, regexp, symbolic name
Template settings: url, key
open page on template open
template autorun user setting

FIXED
Crash opening person.json (schwabe, kirkland, bannerwitcoff)... error: Objects are not valid as a React child (found: object with keys {name}). If you meant to render a collection of children, use an array instead.
file save debug
indicate when autorefresh is disabled
clear data result after opening new template
data panel doesn't refresh automatically after opening a template
busy indicator for manual refresh (spin refresh button)
multi-transforms

sub-items
    repeat -> sub-actions DONE
    each -> sub-actions (with numbering) DONE
    select[type=object] -> sub-selects DONE
    click -> waitfor (subselect) DONE
    pivot DONE
    union DONE
    finalize FAB selection context DONE



DONE: locator action
DONE: switch action

DONE: negate option for selector
DONE: negate option for ErrorEditor
DONE: remove nulls option for selector

DONE: add cookies interface to template settings
DONE: remove key from template settings
DONE: add waitUntil to template settings
DONE: limit as a formula not working (also update limit in chrome extension)
DONE: add default empty second parameter to replace function

DONE: remove nulls from arrays
DONE: array icon is confusing with hamburger icon

